@defer(when dataLoaded){

    <!-- Toast para mostrar el mensaje de eliminación -->
    <div
            class="toast align-items-center text-white bg-secondary border-0 position-fixed top-0 start-50 translate-middle-x mt-3"
            role="alert"
            aria-live="assertive"
            aria-atomic="true"
            [class.show]="showToast"
            [style.opacity]="showToast ? '1' : '0'"
            [style.transition]="'opacity 0.5s ease-in-out'"
            (click)="hideToast()"
            style="cursor:pointer; z-index: 1055;">
        <div class="d-flex">
            <div class="toast-body">
                Novedad eliminada correctamente.
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="Close" (click)="hideToast()"></button>
        </div>
    </div>

    <div *ngIf="authService.isProfesor()" class="boton-container">
        <button class="nueva-novedad-btn" [routerLink]="'/novedad-add/'">
            Nueva Novedad
        </button>
    </div>

    @for (novedad of novedades; track novedad._id) {
        <div class="novedad-container mx-auto d-flex align-items-start mb-4 p-3 border rounded shadow-sm" style="height: 200px;">

            <!-- Imagen -->
            <div class="me-3" style="width: 150px; height: 100%; overflow: hidden;">
                <img [src]="novedad.media" [alt]="novedad.titulo" class="imagen-novedad" style="object-fit: cover; width: 100%; height: 100%;">
            </div>

            <!-- Contenido -->
            <div class="flex-grow-1 d-flex flex-column justify-content-between">
                <div class="titulo fw-bold fs-5">{{ novedad.titulo }}</div>
                <div class="contenido text-muted">{{ novedad.contenido }}</div>
            </div>

            <div *ngIf="authService.isProfesor()" class="d-flex flex-column align-items-end justify-content-between ms-3" style="height: 100%;">
                <fa-icon
                        [icon]="faTrashCan"
                        class=" fs-3 mb-3 icon-hover"
                        style="color:#6a1b9a"
                        (click)="mostrarConfirmacion(novedad)">
                </fa-icon>

                <a
                        [routerLink]="['/novedad-edit', novedad._id]"
                        class="text-black fs-3 icon-hover">
                    <fa-icon [icon]="faPenToSquare"></fa-icon>
                </a>
            </div>

        </div>
    }
    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">

                <div class="modal-header bg-purple text-white">
                    <h5 class="modal-title" id="confirmDeleteLabel">Confirmar eliminación</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <div class="modal-body text-center">
                    <p>¿Estás seguro de que deseas eliminar esta novedad?</p>
                    <strong>{{ novedadParaEliminar?.titulo }}</strong>
                </div>

                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-purple" (click)="confirmarEliminar()">Eliminar</button>
                </div>

            </div>
        </div>
    </div>
}

@placeholder () {
    <div class="d-flex justify-content-center">
        <div class="spinner-border text-success" role="status">
            <span class="visually-hidden">cargando...</span>
        </div>
    </div>
}
